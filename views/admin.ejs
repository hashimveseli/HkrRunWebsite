<!doctype html>
<html lang="sv">
  <head>
      <meta charset="utf-8">
      <title>HKR Run</title>
      <link rel="stylesheet" href="css/style.css">
      <link rel="icon" href="favicon.ico">
  </head>

  <% var userList = users; %>
  <% var tableRow = 0; %>

  <body>

    <div class="header">
      <h1>HKR Run Admin</h1>
      <p>Be in charge of the website.</p>
    </div>

    <ul class="topnav">
      <li><a href="home">Home</a></li>
      <li><a href="history">History</a></li>
      <li><a href="about">About</a></li>
      <li><a href="admin">Admin</a></li>
      <li style="float:right"><a href="configuration"><img  width="14" src="img/configuration.jpg"></a></li>
      <li style="float:right"><a href="logout">Logout</a></li>
    </ul>

    <div class="tableWrapper">
        <table class="defaultTable" id="userTable">
            <tr class="defaultColumn">
                <td>ID</td>
                <td>SSN</td>
                <td>Username</td>
                <td>Email</td>
                <td>Privilege</td>
            </tr>     
            <% if(userList != undefined) { %>   
            <% for(var i = 0; i < userList.length; i++){ %>
              <tr class="defaultRow<%= tableRow %>">
                <td><%= userList[i].userId %></td>
                <td><%= userList[i].ssn %></td>
                <td><%= userList[i].username %></td>
                <td><%= userList[i].email %></td>
                <td><%= userList[i].privilege %></td>
              </tr>
              <% if(tableRow == 0){
                tableRow = 1;
              }else{
                tableRow = 0;
              } %>
            <% } }%>
        </table>
    </div>

    <div>
      <div class="default-form">
        <h1>Change Password Form</h1>
        <form action="/admin/password" method="POST">
          <input type="number" name="userId" placeholder="Enter userId to alter" required>
          <input type="text" name="newPassword" placeholder="New password" required>
          <button class="adminSubmitButtons">Submit</button>
        </form>  
        <% if(passwordChangeStatus != ''){ %>
          <script>alert("<%= passwordChangeStatus %>")</script>
      <% } %>
      </div>

      <div class="default-form">
        <h1>Change Email Form</h1>
        <form action="/admin/email" method="POST">
          <input type="number" name="userId" placeholder="Enter userId to alter" required>
          <input type="text" name="newEmail" placeholder="New email" required>
          <button class="adminSubmitButtons">Submit</button>
        </form>  
        <% if(emailChangeStatus != ''){ %>
          <script>alert("<%= emailChangeStatus %>")</script>
      <% } %>
      </div>

      <div class="default-form">
        <h1>Change Privilege Form</h1>
        <form action="/admin/privilege" method="POST">
          <input type="number" name="userId" placeholder="Enter userId to alter" required>
          <input type="number" name="privilege" placeholder="New privilege (1 or 0)" required>
          <button class="adminSubmitButtons">Submit</button>
        </form>  
        <% if(privilegeChangeStatus != ''){ %>
          <script>alert("<%= privilegeChangeStatus %>")</script>
      <% } %>
      </div>

      <div class="default-form">
        <h1>Delete User Form</h1>
        <form action="/admin/delete" method="POST">
          <input type="number" name="userId" placeholder="Enter userId to alter" required>
          <button class="adminSubmitButtons">Submit</button>
        </form>  
        <% if(deleteUserStatus != ''){ %>
          <script>alert("<%= deleteUserStatus %>")</script>
      <% } %>
      </div>
    </div>

    <script type="text/javascript" src="js/workout.js"></script>
  </body>
</html>
